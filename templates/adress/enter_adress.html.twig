{% extends 'base.html.twig' %}

{% block title %}Choisissez votre adresse{% endblock %}

{% block body %}

    <div class="container-xl">

		<h2 class="text-center mt-5 mb-4">Panier > <strong>Adresse</strong> > Paiement > Confirmation</h2>

		<section class="">
			<div class="container py-5 h-50">
				<div class="row d-flex justify-content-center align-items-center h-100">
					<div class="col-12">
						<div class="card card-registration card-registration-2" style="border-radius: 15px;">
							<div class="card-body p-0">
								<div class="row g-0">
									<div class="col-lg-8">
										<div class="p-5">
											<div class="d-flex justify-content-between align-items-center mb-2">
												<h4 class="fw-bold mb-0 text-black">Votre adresse de livraison</h4>
												<button class="card-link text-reset text-decoration-none border-0" style="background-color: rgba(0,0,0,0);" data-bs-toggle="modal" data-bs-target="#modalUpdate">
													<i class="fa-solid fa-pen"></i>
												</button>
											</div>

											<hr class="my-4">         

                                            <div>
                                            
                                                <div>{{userPostAdress.title}}</div>
                                                <div>{{userPostAdress.lastName}} {{userPostAdress.firstName}}</div>
                                                <div>{{userPostAdress.adress}}</div>
                                                <div>{{userPostAdress.additionalAdress}}</div>
                                                <div>{{userPostAdress.postCode}}</div>
                                                <div>{{userPostAdress.city}}</div>

                                            
                                            </div>

                                            <div class="d-flex justify-content-between align-items-center mb-2 mt-4">
												<h4 class="fw-bold mb-0 text-black">Votre adresse de facturation</h4>
											</div>

											<hr class="my-4">

                                            {% if userPostAdress is not empty %}
                                            
                                                <div>{{userPostAdress.title}}</div>
                                                <div>{{userPostAdress.lastName}} {{userPostAdress.firstName}}</div>
                                                <div>{{userPostAdress.adress}}</div>
                                                <div>{{userPostAdress.additionalAdress}}</div>
                                                <div>{{userPostAdress.postCode}}</div>
                                                <div>{{userPostAdress.city}}</div>

                                            {% else %}

                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" checked>
                                                <label class="form-check-label" for="flexRadioDefault1">
                                                    Identique a l'adresse de livraison
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2">
                                                <label class="form-check-label" for="flexRadioDefault2">
                                                    Ajouter une adresse de facturation
                                                </label>
                                            </div>

                                            {% endif %}
                        
											<div class="pt-5">
												<h6 class="mb-0">
													<a href="{{ path('default_home') }}" class="text-body">
														<i class="fas fa-long-arrow-alt-left me-2"></i>Continuer mes achats</a>
												</h6>
											</div>
										</div>
									</div>
									<div class="col-lg-4 bg-grey">
										<div class="p-5">
											<h3 class="fw-bold mb-5 mt-2 pt-1">Résumé </h3>
											<hr class="my-4">

											<div class="d-flex justify-content-between mb-4">
												<h5 class="">Produits {{ numberOfItem }} </h5>
												<h5>{{ totalPrice/100 }} €</h5>
											</div>

											<h5 class=" mb-3">Livraison</h5>

											<form action="{{ path('payment', {'user': app.user.id, 'cart': cart}) }}" method="post">
											<div class="mb-4 pb-2">
												<select class="form-select" name="postFee" id="postFee">
													<option value="500">Livraison standard - 5.00€</option>
													<option value="5000">Livrason premium - 50.00€</option>
												</select>
											</div>

											<hr class="my-4">

											<div class="d-flex justify-content-between mb-5">
												<h5 class="text-uppercase">Total</h5>
												<h5>{{ totalPrice/100 }} €</h5>
											</div>

											<input type="submit" value="Continuer" class="btn btn-dark btn-block btn-lg" data-mdb-ripple-color="dark"></input>

											</form>

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

	</div>

	<!-- Modal update adresse-->
    <div class="modal fade" id="modalUpdate" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modifier l'adresse</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {{ form(formUpdate) }}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>

{% endblock %}
